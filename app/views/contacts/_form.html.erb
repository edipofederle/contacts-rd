<div class="ui form">
    <%= form_for(@contact) do |f| %>
        
        <%= render partial: "shared/validations", locals: {record: @contact} %>

        <div class="field">
            <%= f.label :name %><br>
            <%= f.text_field :name %>
        </div>

        <div class="field">
            <%= f.label :email %><br>
            <%= f.text_field :email %>
        </div>

        <%= f.fields_for :contact_fields, OpenStruct.new(@contact.contact_fields) do |builder| %>
            <% @custom_fields.each do |field| %>
                <%= render "contacts/fields/#{field.field_type}", field: field, f: builder  %>
            <% end  %>
        <% end %>
        
        <%= f.submit class: "ui primary button" %> 
        <%= link_to "Back", :root, class: "ui button" %>
    <%end %>
</div>
